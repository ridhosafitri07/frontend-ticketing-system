<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - EventKu</title>
    <!-- Link ke file CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Container utama untuk form register -->
    <div class="auth-container">
        
        <!-- Logo website -->
        <div class="logo">
            <img src="images/logo tiket.jpg" alt="EventKu Logo" class="logo-img-auth">
            <h1>EventKu</h1>
            <p>Pesan Tiket Event & Konser Favoritmu</p>
        </div>

        <!-- Info box -->
        <div class="info-box">
            â„¹ï¸ Demo Mode: Data disimpan sementara di browser
        </div>

        <!-- Alert box untuk pesan -->
        <div id="alertBox" class="alert"></div>

        <!-- Form Register -->
        <div class="form-card">
            <h2>Daftar Akun</h2>
            
            <!-- Form dengan event onsubmit untuk handle register -->
            <form onsubmit="handleRegister(event)">
                
                <!-- Input Nama Lengkap -->
                <div class="form-group">
                    <label>Nama Lengkap</label>
                    <div class="input-wrapper">
                        <span class="input-icon">ğŸ‘¤</span>
                        <input 
                            type="text" 
                            id="regName" 
                            placeholder="Nama lengkap" 
                            required>
                    </div>
                </div>

                <!-- Input Email -->
                <div class="form-group">
                    <label>Email</label>
                    <div class="input-wrapper">
                        <span class="input-icon">ğŸ“§</span>
                        <input 
                            type="email" 
                            id="regEmail" 
                            placeholder="contoh@email.com" 
                            required>
                    </div>
                </div>

                <!-- Input No. Telepon -->
                <div class="form-group">
                    <label>No. Telepon</label>
                    <div class="input-wrapper">
                        <span class="input-icon">ğŸ“±</span>
                        <input 
                            type="tel" 
                            id="regPhone" 
                            placeholder="08xxxxxxxxxx" 
                            required>
                    </div>
                </div>

                <!-- Input Password -->
                <div class="form-group">
                    <label>Password</label>
                    <div class="input-wrapper">
                        <span class="input-icon">ğŸ”’</span>
                        <input 
                            type="password" 
                            id="regPassword" 
                            placeholder="Min. 6 karakter" 
                            required 
                            minlength="6">
                        <span class="password-toggle" onclick="togglePassword('regPassword')">ğŸ‘ï¸</span>
                    </div>
                </div>

                <!-- Input Konfirmasi Password -->
                <div class="form-group">
                    <label>Konfirmasi Password</label>
                    <div class="input-wrapper">
                        <span class="input-icon">ğŸ”’</span>
                        <input 
                            type="password" 
                            id="regConfirmPassword" 
                            placeholder="Ulangi password" 
                            required>
                        <span class="password-toggle" onclick="togglePassword('regConfirmPassword')">ğŸ‘ï¸</span>
                    </div>
                </div>

                <!-- Tombol Submit Register -->
                <button type="submit" class="btn-submit">Daftar</button>
            </form>

            <!-- Link ke halaman login -->
            <div class="form-footer">
                Sudah punya akun? 
                <a href="index.html">Login di sini</a>
            </div>
        </div>
    </div>

    <!-- Link ke file JavaScript -->
    <script src="js/script.js"></script>
    
    <!-- JavaScript khusus untuk halaman register -->
    <script>
        // Fungsi untuk handle proses register
        function handleRegister(event) {
            event.preventDefault(); // Mencegah form reload halaman
            
            // Ambil semua value dari input
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            
            // Validasi: Cek apakah password dan konfirmasi password sama
            if (password !== confirmPassword) {
                showAlert('âŒ Password tidak sama!', 'error');
                return; // Stop proses jika password tidak sama
            }
            
            // Ambil data users yang sudah ada dari localStorage
            let users = JSON.parse(localStorage.getItem('users')) || [];
            
            // Cek apakah email sudah pernah didaftarkan
            const emailExists = users.some(user => user.email === email);
            if (emailExists) {
                showAlert('âŒ Email sudah terdaftar!', 'error');
                return; // Stop proses jika email sudah ada
            }
            
            // Buat object user baru dengan data dari form
            const newUser = {
                id: Date.now(), // ID unik menggunakan timestamp
                name: name,
                email: email,
                phone: phone,
                password: password,
                registeredAt: new Date().toLocaleString('id-ID') // Tanggal daftar
            };
            
            // Tambahkan user baru ke array users
            users.push(newUser);
            
            // Simpan kembali ke localStorage
            localStorage.setItem('users', JSON.stringify(users));
            
            // Tampilkan pesan sukses
            showAlert('âœ… Registrasi berhasil! Redirecting ke login...', 'success');
            
            // Reset semua input form
            document.getElementById('regName').value = '';
            document.getElementById('regEmail').value = '';
            document.getElementById('regPhone').value = '';
            document.getElementById('regPassword').value = '';
            document.getElementById('regConfirmPassword').value = '';
            
            // Redirect ke halaman login setelah 2 detik
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 2000);
        }

        // Cek apakah user sudah login
        // Kalau sudah login, redirect ke dashboard
        window.onload = function() {
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                window.location.href = 'dashboard.html';
            }
        };
    </script>
</body>
</html>